# Agent Guidelines for LingoFlow (Opencode Workspace)

This document serves as the primary source of truth for AI agents (and human developers) working in the LingoFlow project within the Opencode workspace.

## 1. Project Overview
- **Stack**: React (Vite), TypeScript, Tailwind CSS.
- **State Management**: Zustand.
- **AI Integration**: Google Gemini API (gemini-2.5-flash).
- **Backend**: Supabase (configured via environment variables).

## 2. Operational Commands

### Development
- **Start Dev Server**: 
  ```bash
  npm run dev
  ```
- **Build for Production**:
  ```bash
  npm run build
  ```

### Code Quality
- **Lint Code**:
  ```bash
  npm run lint
  ```

## 3. Code Style & Conventions

### 3.1 React & Component Design
- **Functional Components**: Use arrow functions for components.
- **Naming**: `PascalCase` for components and screens (e.g., `VocabularyManager.tsx`).
- **Styling**: Use Tailwind CSS for all styling. Avoid inline styles unless dynamic.
- **Icons**: Lucide React is the preferred icon library.

### 3.2 TypeScript Usage
- **Strict Mode**: Ensure types are explicitly defined.
- **Interfaces**: Define interfaces for props and data models in `types.ts` or locally if specific to a component.
- **No `any`**: Avoid the `any` type at all costs.

### 3.3 Folder Structure
- `components/`: Reusable UI elements.
- `screens/`: Main page components.
- `store/`: Zustand stores.
- `utils/`: Helper functions and API clients (e.g., `gemini.ts`).
- `types.ts`: Global type definitions.

## 4. AI Best Practices
- **Model**: Always use `gemini-2.5-flash` for AI-related tasks unless specified otherwise.
- **Error Handling**: Gracefully handle API failures with user-facing messages.
- **Context**: When generating content, provide clear system prompts to maintain the language-learning focus.

## 5. Opencode Integration
- **Terminal**: Use `Ctrl+Esc` to access the Opencode terminal.
- **Context Sharing**: Use `@File` references when discussing specific code sections.

## 6. System Behavior Guidelines
- 自我修復 (Self-healing)：當系統在執行過程中遇到錯誤時，必須優先嘗試自動排錯與修正（例如重試、調整參數、修正腳本），將人工干預降至最低。
- 實施計劃 (Implementation Plan)：在建立重要檔案或執行重大程式碼變更前，應先產出實施計劃，包括目標、步驟、潛在風險與回滾策略，並預留給使用者評論與審核。
- 本地化優先：在需要工具或知識時，優先搜尋與引用儲存於本地 `skills/` 或其他專案內目錄的能力與文件，以節省 Token 消耗並提升穩定性與可控性。
- 漸進式變更：偏好小步驟、可驗證的變更，而不是一次性大規模重構。
- 可觀測性：重要流程應在日誌或說明中註記關鍵步驟、輸入與輸出，方便之後除錯與審計。

## 7. Directive Layer

- 核心角色：你是一位具備自動化思維的資深工程師，負責引導整個系統完成任務。
- 專案目標：根據使用者輸入，產出高品質、可預測且具備一致性的結果。
- 運作模式：在執行任何實例化任務或自動化腳本前，必須先讀取本檔案與相關 directives，以了解所有工具、腳本與目標。
---
*Generated by Opencode Agent for LingoFlow*
